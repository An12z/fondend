<!DOCTYPE html>
<html lang="vi">

<head>
  <!-- Owl Carousel CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" />

  <!-- jQuery + Owl Carousel JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hi·ªáu S√°ch Mini</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* M·ªôt v√†i ch·ªânh nh·ªè ƒë·ªÉ ·∫£nh carousel hi·ªÉn th·ªã ƒë·∫πp */
    .owl-carousel .item {
      padding: 8px;
    }

    .owl-carousel .item .card {
      box-shadow: none;
    }

    .owl-carousel .item img {
      width: 100%;
      height: 170px;
      object-fit: cover;
      border-radius: 8px;
    }

    @media (max-width:480px) {
      .owl-carousel .item img {
        height: 140px;
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="brand">üìö Hi·ªáu S√°ch Mini</div>

    <!-- N√∫t menu ch·ªâ hi·ªán khi ·ªü mobile -->
    <button class="menu-toggle" id="menuToggle">
      ‚ò∞
    </button>

    <nav id="navMenu">
      <!-- Thanh t√¨m ki·∫øm -->
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="T√¨m s√°ch..." oninput="searchBooks()" />
        <button type="button" onclick="searchBooks()">üîç</button>
      </div>

      <a href="child.html" id="nav-home">Trang ch·ªß</a>
      <a href="cart.html" id="nav-cart">Gi·ªè h√†ng (<span id="cart-count">0</span>)</a>
      <a href="about.html" class="nav-link">Gi·ªõi thi·ªáu</a>

      <!-- Th·ªÉ lo·∫°i c√≥ menu con -->
      <div class="dropdown">
        <a href="#/category" id="nav-category">Th·ªÉ lo·∫°i ‚ñæ</a>
        <div class="dropdown-content">
          <a href="congnghe.html">üìò C√¥ng ngh·ªá</a>
          <a href="vanhoc.html">üìñ VƒÉn h·ªçc</a>
          <a href="kinhte.html">üíº Kinh t·∫ø</a>
          <a href="thieunhi.html">üë∂ Thi·∫øu nhi</a>
        </div>
      </div>
    </nav>
  </header>


  <main class="container">
    <!-- view tr·ªëng, m·ªçi th·ª© render b·∫±ng JS -->
    <div id="view"></div>
  </main>

  <footer class="footer bg-gray-200 text-gray-800 text-center py-6 mt-8">
    <p class="font-semibold">¬© 2025 Hi·ªáu S√°ch Mini ‚Äî Demo t·ªëi gi·∫£n b√°n & ƒë·ªçc ebook</p>

    <div class="mt-2">
      <p>
        <strong>ƒê∆°n v·ªã:</strong>
        <a href="https://www.google.com/maps/place/Cao+%C4%90%E1%BA%B3ng+C%C3%B4ng+Ngh%E1%BB%87+Th%C3%B4ng+Tin+TP.HCM/@10.7750549,106.6319191,857m/data=!3m2!1e3!4b1!4m6!3m5!1s0x31752ea144839ef1:0x798819bdcd0522b0!8m2!3d10.7750496!4d106.6344994!16s%2Fg%2F1v6wltsg?entry=ttu&g_ep=EgoyMDI1MDkwMi4wIKXMDSoASAFQAw%3D%3D"
          target="_blank" class="underline hover:text-blue-600">
          Tr∆∞·ªùng Cao ƒë·∫≥ng C√¥ng ngh·ªá Th√¥ng tin (ITC)
        </a>
      </p>
      <p><strong>Ng∆∞·ªùi th·ª±c hi·ªán:</strong> Nguy·ªÖn L√™ Th√°i An</p>
    </div>

    <div class="mt-2">
      <p><strong>Li√™n h·ªá:</strong></p>
      <p>üìû 0984 499 074</p>
      <p>‚úâÔ∏è <a href="mailto:annguyengocong2@gmail.com"
          class="underline hover:text-blue-600">annguyengocong2@gmail.com</a></p>
    </div>
  </footer>


  <script>
    /** D·ªÆ LI·ªÜU M·∫™U */
    const BOOKS = [
      { id: 1, title: 'L·∫≠p Tr√¨nh T·ªëi Gi·∫£n', author: 'N. Dev', price: 59000, type: 'ebook', cover: 'anh/2.jpg', pdf: 'ebooks/book1.pdf', description: 'H∆∞·ªõng d·∫´n vi·∫øt code g·ªçn nh·∫π v√† hi·ªáu qu·∫£.' },
      { id: 2, title: 'K·ªπ NƒÉng M·ªÅm', author: 'T. Soft', price: 79000, type: 'ebook', cover: 'anh/1.png', pdf: 'ebooks/book2.pdf', description: 'Giao ti·∫øp, thuy·∫øt tr√¨nh, l√†m vi·ªác nh√≥m cho ng∆∞·ªùi m·ªõi.' },
      { id: 3, title: 'Nh·ªØng ƒê√™m M∆∞a', author: 'L. VƒÉn', price: 69000, type: 'ebook', cover: 'anh/4.png', pdf: 'ebooks/book3.pdf', description: 'Tuy·ªÉn t·∫≠p truy·ªán ng·∫Øn c·∫£m x√∫c.' },
      { id: 4, title: 'C√¥ng Nghi·ªáp M√¥i Tr∆∞·ªùng', author: 'T. Soft', price: 59000, type: 'ebook', cover: 'anh/3.png', pdf: 'ebooks/book4.pdf', description: 'Giao ti·∫øp, thuy·∫øt tr√¨nh, l√†m vi·ªác nh√≥m cho ng∆∞·ªùi m·ªõi.' },
      { id: 5, title: 'The Pragmatic Programmer', author: 'L. VƒÉn', price: 69000, type: 'ebook', cover: 'anh/5.png', pdf: 'ebooks/book5.pdf', description: 'Tuy·ªÉn t·∫≠p truy·ªán ng·∫Øn c·∫£m x√∫c.' },
      { id: 6, title: 'Clean Code', author: 'T. Soft', price: 59000, type: 'ebook', cover: 'anh/6.png', pdf: 'ebooks/book6.pdf', description: 'Giao ti·∫øp, thuy·∫øt tr√¨nh, l√†m vi·ªác nh√≥m cho ng∆∞·ªùi m·ªõi.' },
      { id: 7, title: 'L·∫≠p Tr√¨nh JavaScript C∆° B·∫£n', author: 'N. Code', price: 69000, type: 'ebook', cover: 'anh/7.png', pdf: 'ebooks/book7.pdf', description: 'H·ªçc c√∫ ph√°p, h√†m, v√† c√°ch x√¢y d·ª±ng ·ª©ng d·ª•ng web v·ªõi JavaScript.' },
      { id: 8, title: 'Artificial Intelligence', author: 'H. Design', price: 75000, type: 'ebook', cover: 'anh/8.png', pdf: 'ebooks/book8.pdf', description: 'Nguy√™n t·∫Øc UI/UX v√† th·ª±c h√†nh v·ªõi HTML, CSS, Tailwind.' },
      { id: 9, title: 'Ph√¢n T√≠ch D·ªØ Li·ªáu V·ªõi Python', author: 'D. Data', price: 85000, type: 'ebook', cover: 'anh/9.png', pdf: 'ebooks/book9.pdf', description: 'Kh√°m ph√° Pandas, NumPy v√† tr·ª±c quan h√≥a d·ªØ li·ªáu b·∫±ng Matplotlib.' },
      { id: 10, title: 'Tr√≠ Tu·ªá Nh√¢n T·∫°o ·ª®ng D·ª•ng', author: 'A. Smart', price: 99000, type: 'ebook', cover: 'anh/10.png', pdf: 'ebooks/book10.pdf', description: 'C∆° b·∫£n v·ªÅ AI, machine learning v√† c√°ch ·ª©ng d·ª•ng trong th·ª±c t·∫ø.' },

      { id: 11, title: 'Kinh T·∫ø H·ªçc Vƒ© M√¥', author: 'P. Samuelson', price: 120000, type: 'ebook', cover: 'anh/11.png', pdf: 'ebooks/econ1.pdf', description: 'Nguy√™n l√Ω c∆° b·∫£n v·ªÅ tƒÉng tr∆∞·ªüng, l·∫°m ph√°t v√† th·∫•t nghi·ªáp.' },
      { id: 12, title: 'T∆∞ B·∫£n Lu·∫≠n', author: 'Karl Marx', price: 150000, type: 'ebook', cover: 'anh/12.png', pdf: 'ebooks/econ2.pdf', description: 'Ph√¢n t√≠ch v·ªÅ s·∫£n xu·∫•t h√†ng h√≥a, gi√° tr·ªã th·∫∑ng d∆∞ v√† kinh t·∫ø ch√≠nh tr·ªã.' },
      { id: 13, title: 'Qu·ªëc Gia Kh·ªüi Nghi·ªáp', author: 'Dan Senor & Saul Singer', price: 135000, type: 'ebook', cover: 'anh/13.png', pdf: 'ebooks/econ3.pdf', description: 'Kh√°m ph√° m√¥ h√¨nh kinh t·∫ø v√† tinh th·∫ßn kh·ªüi nghi·ªáp c·ªßa Israel.' },
      { id: 14, title: 'Kinh T·∫ø H·ªçc Vi M√¥', author: 'Hal R. Varian', price: 110000, type: 'ebook', cover: 'anh/14.png', pdf: 'ebooks/econ4.pdf', description: 'Cung, c·∫ßu, th·ªã tr∆∞·ªùng v√† h√†nh vi ng∆∞·ªùi ti√™u d√πng.' },
      { id: 15, title: 'T∆∞ Duy Nhanh V√† Ch·∫≠m', author: 'Daniel Kahneman', price: 140000, type: 'ebook', cover: 'anh/15.png', pdf: 'ebooks/econ5.pdf', description: 'Kinh t·∫ø h·ªçc h√†nh vi v√† c√°ch con ng∆∞·ªùi ra quy·∫øt ƒë·ªãnh.' },
      { id: 16, title: 'Cha Gi√†u Cha Ngh√®o', author: 'Robert T. Kiyosaki', price: 95000, type: 'ebook', cover: 'anh/16.png', pdf: 'ebooks/econ6.pdf', description: 'B√†i h·ªçc t√†i ch√≠nh c√° nh√¢n v√† t∆∞ duy v·ªÅ ti·ªÅn b·∫°c.' },
      { id: 17, title: 'Nguy√™n L√Ω Kinh T·∫ø H·ªçc', author: 'N. Gregory Mankiw', price: 160000, type: 'ebook', cover: 'anh/17.png', pdf: 'ebooks/econ7.pdf', description: 'Gi·ªõi thi·ªáu to√†n di·ªán v·ªÅ c√°c nguy√™n l√Ω kinh t·∫ø h·ªçc hi·ªán ƒë·∫°i.' },
      { id: 18, title: 'S·ª± Gi√†u C√≥ C·ªßa C√°c Qu·ªëc Gia', author: 'Adam Smith', price: 145000, type: 'ebook', cover: 'anh/18.png', pdf: 'ebooks/econ8.pdf', description: 'T√°c ph·∫©m kinh ƒëi·ªÉn khai sinh kinh t·∫ø h·ªçc hi·ªán ƒë·∫°i.' },
      { id: 19, title: 'Kinh T·∫ø H·ªçc H√†nh Vi', author: 'Richard H. Thaler', price: 125000, type: 'ebook', cover: 'anh/19.png', pdf: 'ebooks/econ9.pdf', description: 'Ph√¢n t√≠ch t√¢m l√Ω trong h√†nh vi kinh t·∫ø v√† th·ªã tr∆∞·ªùng.' },
      { id: 20, title: '21 B√†i H·ªçc Cho Th·∫ø K·ª∑ 21', author: 'Yuval Noah Harari', price: 135000, type: 'ebook', cover: 'anh/20.png', pdf: 'ebooks/econ10.pdf', description: 'Nh·ªØng v·∫•n ƒë·ªÅ kinh t·∫ø, ch√≠nh tr·ªã v√† x√£ h·ªôi trong th·ªùi ƒë·∫°i m·ªõi.' },

      { id: 21, title: 'Ho√†ng T·ª≠ B√©', author: 'Antoine de Saint-Exup√©ry', price: 85000, type: 'ebook', cover: 'anh/21.png', pdf: 'ebooks/kid1.pdf', description: 'C√¢u chuy·ªán c·ªï ƒëi·ªÉn v·ªÅ t√¨nh b·∫°n, t√¨nh y√™u v√† c√°i nh√¨n tr·∫ª th∆°.' },
      { id: 22, title: 'Alice ·ªû X·ª© S·ªü Th·∫ßn Ti√™n', author: 'Lewis Carroll', price: 90000, type: 'ebook', cover: 'anh/22.png', pdf: 'ebooks/kid2.pdf', description: 'H√†nh tr√¨nh k·ª≥ ·∫£o c·ªßa Alice khi r∆°i v√†o th·∫ø gi·ªõi th·∫ßn ti√™n.' },
      { id: 23, title: 'Harry Potter V√† H√≤n ƒê√° Ph√π Th·ªßy', author: 'J.K. Rowling', price: 120000, type: 'ebook', cover: 'anh/23.png', pdf: 'ebooks/kid3.pdf', description: 'Cu·ªën ƒë·∫ßu ti√™n trong series Harry Potter n·ªïi ti·∫øng to√†n c·∫ßu.' },
      { id: 24, title: 'C·∫≠u B√© Peter Pan', author: 'J.M. Barrie', price: 80000, type: 'ebook', cover: 'anh/24.png', pdf: 'anh/24.pdf', description: 'C√¢u chuy·ªán v·ªÅ c·∫≠u b√© kh√¥ng bao gi·ªù mu·ªën l·ªõn v√† x·ª© Neverland.' },
      { id: 25, title: 'D·∫ø M√®n Phi√™u L∆∞u K√Ω (Thi·∫øu Nhi)', author: 'T√¥ Ho√†i', price: 75000, type: 'ebook', cover: 'anh/25.png', pdf: 'anh/25.pdf', description: 'T√°c ph·∫©m thi·∫øu nhi kinh ƒëi·ªÉn Vi·ªát Nam, h√†nh tr√¨nh phi√™u l∆∞u ƒë·∫ßy √Ω nghƒ©a.' },
      { id: 26, title: 'Kh√¥ng Gia ƒê√¨nh', author: 'Hector Malot', price: 95000, type: 'ebook', cover: 'anh/26.png', pdf: 'anh/26.pdf', description: 'H√†nh tr√¨nh gian nan nh∆∞ng c·∫£m ƒë·ªông c·ªßa c·∫≠u b√© R√©mi.' },
      { id: 27, title: 'B√© H·∫°t Ti√™u', author: 'Astrid Lindgren', price: 70000, type: 'ebook', cover: 'anh/27.png', pdf: 'anh/27.pdf', description: 'C√¢u chuy·ªán d·ªÖ th∆∞∆°ng v√† h√†i h∆∞·ªõc v·ªÅ c√¥ b√© nh·ªè b√© nh∆∞ng ƒë·∫ßy ngh·ªã l·ª±c.' },
      { id: 28, title: 'Nh·ªØng T·∫•m L√≤ng Cao C·∫£', author: 'Edmondo De Amicis', price: 85000, type: 'ebook', cover: 'anh/28.png', pdf: 'anh/28.pdf', description: 'T·∫≠p h·ª£p nh·ªØng c√¢u chuy·ªán c·∫£m ƒë·ªông v·ªÅ t√¨nh b·∫°n, gia ƒë√¨nh v√† l√≤ng nh√¢n √°i.' },
      { id: 29, title: 'Ho√†ng T·ª≠ R·ª´ng Xanh', author: 'Rudyard Kipling', price: 90000, type: 'ebook', cover: 'anh/29.png', pdf: 'anh/29.pdf', description: 'C·∫≠u b√© Mowgli l·ªõn l√™n gi·ªØa r·ª´ng gi√† c√πng mu√¥n th√∫.' },
      { id: 30, title: 'Ch√∫ B√© R·∫Øc R·ªëi Dennis', author: 'Hank Ketcham', price: 65000, type: 'ebook', cover: 'anh/30.png', pdf: 'anh/30.pdf', description: 'Nh·ªØng t√¨nh hu·ªëng h√†i h∆∞·ªõc v√† r·∫Øc r·ªëi c·ªßa c·∫≠u b√© Dennis.' },

      { id: 31, title: 'Chi·∫øn Tranh v√† H√≤a B√¨nh', author: 'Lev Tolstoy', price: 150000, type: 'ebook', cover: 'anh/31.png', pdf: 'ebooks/lit1.pdf', description: 'Ki·ªát t√°c vƒÉn h·ªçc Nga v·ªÅ chi·∫øn tranh, h√≤a b√¨nh v√† s·ªë ph·∫≠n con ng∆∞·ªùi.' },
      { id: 32, title: 'Nh√† Gi·∫£ Kim', author: 'Paulo Coelho', price: 95000, type: 'ebook', cover: 'anh/32.png', pdf: 'ebooks/lit2.pdf', description: 'Cu·ªën ti·ªÉu thuy·∫øt ƒë·∫ßy c·∫£m h·ª©ng v·ªÅ h√†nh tr√¨nh ƒëi t√¨m ∆∞·ªõc m∆°.' },
      { id: 33, title: 'ƒê·∫Øc Nh√¢n T√¢m', author: 'Dale Carnegie', price: 80000, type: 'ebook', cover: 'anh/33.png', pdf: 'ebooks/lit3.pdf', description: 'T√°c ph·∫©m kinh ƒëi·ªÉn v·ªÅ ngh·ªá thu·∫≠t giao ti·∫øp v√† ·ª©ng x·ª≠.' },
      { id: 34, title: 'Truy·ªán Ki·ªÅu', author: 'Nguy·ªÖn Du', price: 70000, type: 'ebook', cover: 'anh/34.png', pdf: 'ebooks/lit4.pdf', description: 'Ki·ªát t√°c th∆° N√¥m Vi·ªát Nam, c√¢u chuy·ªán bi th∆∞∆°ng c·ªßa Th√∫y Ki·ªÅu.' },
      { id: 35, title: 'S·ªë ƒê·ªè', author: 'V≈© Tr·ªçng Ph·ª•ng', price: 75000, type: 'ebook', cover: 'anh/35.png', pdf: 'ebooks/lit5.pdf', description: 'T√°c ph·∫©m tr√†o ph√∫ng n·ªïi ti·∫øng, ph√™ ph√°n x√£ h·ªôi th·ª±c d√¢n n·ª≠a t√¢y n·ª≠a ta.' },
      { id: 36, title: 'Ch√≠ Ph√®o', author: 'Nam Cao', price: 60000, type: 'ebook', cover: 'anh/36.png', pdf: 'ebooks/lit6.pdf', description: 'Truy·ªán ng·∫Øn kinh ƒëi·ªÉn v·ªÅ bi k·ªãch c·ªßa ng∆∞·ªùi n√¥ng d√¢n Vi·ªát Nam.' },
      { id: 37, title: 'T·∫Øt ƒê√®n', author: 'Ng√¥ T·∫•t T·ªë', price: 65000, type: 'ebook', cover: 'anh/37.png', pdf: 'ebooks/lit7.pdf', description: 'H√¨nh ·∫£nh ƒëau kh·ªï v√† ki√™n c∆∞·ªùng c·ªßa ng∆∞·ªùi ph·ª• n·ªØ n√¥ng d√¢n tr∆∞·ªõc s∆∞u cao thu·∫ø n·∫∑ng.' },
      { id: 38, title: 'D·∫ø M√®n Phi√™u L∆∞u K√Ω', author: 'T√¥ Ho√†i', price: 70000, type: 'ebook', cover: 'anh/38.png', pdf: 'ebooks/lit8.pdf', description: 'T√°c ph·∫©m n·ªïi ti·∫øng d√†nh cho thi·∫øu nhi nh∆∞ng gi√†u tri·∫øt l√Ω nh√¢n sinh.' },
      { id: 39, title: 'N·ªói Bu·ªìn Chi·∫øn Tranh', author: 'B·∫£o Ninh', price: 90000, type: 'ebook', cover: 'anh/39.png', pdf: 'ebooks/lit9.pdf', description: 'M·ªôt ti·ªÉu thuy·∫øt s√¢u s·∫Øc v·ªÅ chi·∫øn tranh Vi·ªát Nam v√† n·ªói ƒëau c√≤n l·∫°i.' },
    ];

    // Helpers
    const $ = (sel, el = document) => el.querySelector(sel);
    const $$ = (sel, el = document) => [...el.querySelectorAll(sel)];
    const money = v => v.toLocaleString('vi-VN') + '‚Ç´';

    // LocalStorage state
    const load = (k, def) => { try { return JSON.parse(localStorage.getItem(k)) ?? def; } catch { return def; } };
    const save = (k, v) => localStorage.setItem(k, JSON.stringify(v));

    const state = {
      cart: load('cart', []), // [{id, qty}]
      purchases: load('purchases', []) // [bookId]
    };

    
    function sync() {
      save('cart', state.cart);
      save('purchases', state.purchases);
      updateCartCount();
    }

    function updateCartCount() {
      const count = state.cart.reduce((s, i) => s + (i.qty || 0), 0);
      const el = document.getElementById('cart-count');
      if (el) el.textContent = count;
    }

    // addToCart (ƒë∆°n gi·∫£n)
    function addToCart(id) {
      const it = state.cart.find(x => x.id === id);
      if (it) it.qty++;
      else state.cart.push({ id, qty: 1 });
      sync();
      // n·∫øu mu·ªën, b·∫°n c√≥ th·ªÉ m·ªü modal ho·∫∑c chuy·ªÉn sang trang gi·ªè h√†ng
    }
    

    // Kh·ªüi t·∫°o Owl Carousel (s·ª≠ d·ª•ng jQuery)
    function initCarousel() {
      if (typeof jQuery === 'undefined') return;
      const $j = jQuery('.owl-carousel');
      if (!$j.length) return;
      try { $j.trigger('destroy.owl.carousel'); } catch (e) { /* ignore */ }
      $j.owlCarousel({
        loop: true,
        margin: 12,
        nav: true,
        autoplay: true,
        autoplayTimeout: 3000,
        autoplayHoverPause: true,
        responsive: {
          0: { items: 1 },
          480: { items: 2 },
          768: { items: 3 },
          1024: { items: 4 }
        }
      });
    }

    // S·ªë s√°ch hi·ªÉn th·ªã trong grid (x·ª≠ l√Ω "Xem th√™m")
    const BOOKS_PER_ROW = 5;
    const ROWS_TO_SHOW = 2;
    let booksToShow = BOOKS_PER_ROW * ROWS_TO_SHOW;

    // Render trang ch·ªß ‚Äî c√≥ carousel + grid (slice)
    function renderHome() {
      const view = document.getElementById('view');
      const totalBooks = BOOKS.length;
      const booksSlice = BOOKS.slice(0, booksToShow);

      // Carousel s·∫Ω l·∫•y c√°c s√°ch m·ªõi nh·∫•t (·ªü ƒë√¢y l·∫•y 8 item ƒë·∫ßu)
      const carouselItems = BOOKS.slice(0, Math.min(10, BOOKS.length)).map(b => `
          <div class="item">
            <div class="card">
              <img src="${b.cover}" alt="${b.title}" />
              <div class="title" style="margin-top:8px">${b.title}</div>
              <div class="muted">${b.author}</div>
              <div class="row" style="justify-content:space-between; margin-top:6px;">
                <div class="price">${money(b.price)}</div>
                <span class="tag">${b.type.toUpperCase()}</span>
              </div>
              <div class="row" style="margin-top:8px; justify-content:center;">
                <button class="btn" onclick="addToCart(${b.id})">Th√™m v√†o gi·ªè</button>
                <a class="btn secondary" href="#/detail/${b.id}" style="margin-left:8px">Xem chi ti·∫øt</a>
              </div>
            </div>
          </div>
        `).join('');

      const gridHtml = booksSlice.map(b => `
          <div class="card">
            <img src="${b.cover}" alt="${b.title}" />
            <div class="title">${b.title}</div>
            <div class="muted">${b.author}</div>
            <div class="row" style="justify-content:space-between; margin-top:6px;">
              <div class="price">${money(b.price)}</div>
              <span class="tag">${b.type.toUpperCase()}</span>
            </div>
            <div class="row" style="margin-top:10px;">
              <button class="btn" onclick="addToCart(${b.id})">Th√™m v√†o gi·ªè</button>
              <a class="btn secondary" href="#/detail/${b.id}">Xem chi ti·∫øt</a>
            </div>
          </div>
        `).join('');

      view.innerHTML = `<!-- TH√äM div bao ngo√†i ƒë·ªÉ l√†m n·ªÅn b·∫±ng ·∫£nh -->
<div class="section-bg"> 
  <!-- ·∫¢NH N·ªÄN FULL WIDTH -->
<div style="width:100%; overflow:hidden; margin-bottom: 14px;">
  <img src="anh/backgroup1.png" alt="M·ªõi c·∫≠p nh·∫≠t" 
       style="width:100%; height:auto; display:block;">
</div>

<!-- TI√äU ƒê·ªÄ B√äN D∆Ø·ªöI -->
<div class="row" style="justify-content:space-between; align-items:end; margin-bottom: 14px;">
  <div>
    <h2 style="margin:6px 0 4px">M·ªõi c·∫≠p nh·∫≠t</h2>
    <div class="muted">Danh s√°ch ebook c√≥ th·ªÉ ƒë·ªçc online sau khi mua</div>
  </div>
</div>



<div class="owl-carousel owl-theme">
  <div class="item"><img src="anh/backgroup1.png" alt="Banner 1"></div>
  <div class="item"><img src="anh/backgroup2.png" alt="Banner 2"></div>
  <div class="item"><img src="anh/backgroup3.png" alt="Banner 3"></div>
  <div class="item"><img src="anh/backgroup4.png" alt="Banner 4"></div>
</div>

       

          <div class="grid" style="margin-top:28px;">
            ${gridHtml}
          </div>

          ${booksToShow < totalBooks ? `<div style="text-align:center; margin:12px 0;"><button id="load-more" class="btn">Xem th√™m</button></div>` : ''}
        `;

      // Kh·ªüi t·∫°o carousel sau khi ƒë√£ ch√®n HTML
      initCarousel();

      // X·ª≠ l√Ω n√∫t xem th√™m
      const loadMoreBtn = document.getElementById('load-more');
      if (loadMoreBtn) {
        loadMoreBtn.addEventListener('click', () => {
          booksToShow += BOOKS_PER_ROW * ROWS_TO_SHOW;
          renderHome();
        });
      }

      setActive('#/home');
    }

    // Render detail
    function renderDetail(id) {
      const view = $('#view');
      const b = BOOKS.find(x => x.id == id);
      if (!b) { view.innerHTML = `<div class="empty panel">Kh√¥ng t√¨m th·∫•y s√°ch.</div>`; return; }

      const owned = state.purchases.includes(b.id);
      view.innerHTML = `
          <div class="panel detail">
            <div><img src="${b.cover}" alt="${b.title}" style="width:100%; border-radius:16px;"></div>
            <div>
              <h2 style="margin:0 0 6px">${b.title}</h2>
              <div class="muted" style="margin-bottom:10px;">T√°c gi·∫£: ${b.author}</div>
              <p class="muted" style="line-height:1.6">${b.description}</p>
              <div class="row" style="margin:14px 0 8px; align-items: center;">
                <div class="price" style="font-size:18px;">${money(b.price)}</div>
                <span class="tag">${b.type.toUpperCase()}</span>
              </div>
              <div class="row" style="margin-top:10px;">
                <button class="btn" onclick="addToCart(${b.id})">Th√™m v√†o gi·ªè</button>
                ${owned ? `<a class="btn secondary" href="#/reader/${b.id}">ƒê·ªçc ngay</a>` : `<button class="btn secondary" onclick="alert('Mua s√°ch ƒë·ªÉ ƒë·ªçc online nh√©!');">ƒê·ªçc th·ª≠ (kh√≥a)</button>`}
                <a class="btn secondary" href="#/home">‚Üê Quay l·∫°i</a>
              </div>
            </div>
          </div>
        `;
      setActive();
    }

    // Render reader (embed pdf) 
    function renderReader(id) {
      const view = $('#view');
      const b = BOOKS.find(x => x.id == id);
      if (!b) { view.innerHTML = `<div class="panel empty">Kh√¥ng t√¨m th·∫•y s√°ch.</div>`; return; }
      const owned = state.purchases.includes(b.id);
      if (!owned) {
        view.innerHTML = `<div class="panel empty">B·∫°n ch∆∞a s·ªü h·ªØu ebook n√†y. <a href="#/detail/${b.id}">Mua ngay</a></div>`;
        return;
      }
      view.innerHTML = `
          <div class="panel">
            <div class="row" style="justify-content:space-between; align-items:center; margin-bottom:10px;">
              <div>
                <div class="muted" style="font-size:12px;">ƒêang ƒë·ªçc</div>
                <h2 style="margin:2px 0 0">${b.title}</h2>
              </div>
              <a class="btn secondary" href="#/detail/${b.id}">‚Üê Quay l·∫°i chi ti·∫øt</a>
            </div>
            <embed class="reader" src="${b.pdf}" type="application/pdf" />
            <div class="muted" style="margin-top:8px; font-size:12px;">N·∫øu PDF kh√¥ng hi·ªÉn th·ªã, h√£y ƒë·∫£m b·∫£o b·∫°n ƒë√£ ƒë·∫∑t file t·∫°i <code>${b.pdf}</code>.</div>
          </div>
        `;
      setActive();
    }

    // Render cart ƒë∆°n gi·∫£n
    function renderCart() {
      const view = document.getElementById('view');
      if (!state.cart.length) {
        view.innerHTML = `<div class="panel empty">Gi·ªè h√†ng tr·ªëng.</div>`;
        return;
      }

      const rows = state.cart.map(ci => {
        const book = BOOKS.find(b => b.id === ci.id);
        const subtotal = (book?.price || 0) * ci.qty;
        return `
            <div class="panel" style="display:flex; align-items:center; gap:12px; margin-bottom:8px;">
              <img src="${book.cover}" style="width:80px; height:100px; object-fit:cover; border-radius:8px;">
              <div style="flex:1;">
                <div style="font-weight:700">${book.title}</div>
                <div class="muted">${book.author}</div>
                <div style="margin-top:6px;">S·ªë l∆∞·ª£ng: <button class="btn" onclick="changeQty(${ci.id}, -1)">-</button> ${ci.qty} <button class="btn" onclick="changeQty(${ci.id}, 1)">+</button></div>
              </div>
              <div style="text-align:right;">
                <div class="price">${money(subtotal)}</div>
                <button class="btn danger" onclick="removeFromCart(${ci.id})" style="margin-top:8px">X√≥a</button>
              </div>
            </div>
          `;
      }).join('');

      const total = state.cart.reduce((s, i) => {
        const b = BOOKS.find(x => x.id === i.id); return s + (b?.price || 0) * i.qty;
      }, 0);

      view.innerHTML = `
          <h2 style="margin-bottom:12px">Gi·ªè h√†ng</h2>
          ${rows}
          <div style="text-align:right; margin-top:12px;">
            <div style="font-weight:800; font-size:18px">T·ªïng: ${money(total)}</div>
            <button class="btn" style="margin-top:8px;" onclick="checkout()">Thanh to√°n</button>
            <a class="btn secondary" href="#/home" style="margin-left:8px">‚Üê Ti·∫øp t·ª•c mua s·∫Øm</a>
          </div>
        `;
      setActive('#/cart');
    }

    function changeQty(id, delta) {
      const it = state.cart.find(x => x.id === id);
      if (!it) return;
      it.qty += delta;
      if (it.qty <= 0) state.cart = state.cart.filter(x => x.id !== id);
      sync();
      renderCart();
    }

    function removeFromCart(id) {
      state.cart = state.cart.filter(x => x.id !== id);
      sync();
      renderCart();
    }

    function checkout() {
      if (!state.cart.length) { alert('Gi·ªè h√†ng tr·ªëng'); return; }
      // demo: mark purchases and clear cart
      state.cart.forEach(i => {
        if (!state.purchases.includes(i.id)) state.purchases.push(i.id);
      });
      state.cart = [];
      sync();
      alert('Thanh to√°n gi·∫£ l·∫≠p th√†nh c√¥ng. B·∫°n c√≥ th·ªÉ ƒë·ªçc s√°ch trong m·ª•c "ƒê·ªçc ngay"');
      router();
    }

    // Tiny router
    function router() {
      const hash = location.hash || '#/home';
      const [_, route, param] = hash.split('/');
      switch (route) {
        case 'home': renderHome(); break;
        case 'detail': renderDetail(param); break;
        case 'cart': renderCart(); break;
        case 'reader': renderReader(param); break;
        default: renderHome();
      }
    }

    function setActive(target) {
      $$('#nav-home, #nav-cart').forEach(a => a.classList.remove('active'));
      if (target) {
        const sel = (target === '#/cart') ? '#nav-cart' : '#nav-home';
        const el = document.querySelector(sel);
        if (el) el.classList.add('active');
      }
    }

    // Search
    function searchBooks() {
      const keyword = (document.getElementById('searchInput')?.value || '').trim().toLowerCase();
      const view = document.getElementById('view');
      if (!keyword) { renderHome(); return; }

      const results = BOOKS.filter(b =>
        b.title.toLowerCase().includes(keyword) ||
        b.author.toLowerCase().includes(keyword)
      );

      if (results.length === 0) {
        view.innerHTML = `<div class="panel empty">Kh√¥ng t√¨m th·∫•y s√°ch n√†o v·ªõi t·ª´ kh√≥a "${keyword}".</div>`;
        return;
      }

      view.innerHTML = `<div style="margin-bottom:12px;"><h2>K·∫øt qu·∫£ t√¨m ki·∫øm (${results.length})</h2></div>
          <div class="grid">
            ${results.map(b => `
              <div class="card">
                <img src="${b.cover}" alt="${b.title}">
                <div class="title">${b.title}</div>
                <div class="muted">${b.author}</div>
                <div class="row" style="justify-content:space-between; margin-top:6px;">
                  <div class="price">${money(b.price)}</div>
                  <span class="tag">${b.type.toUpperCase()}</span>
                </div>
                <div class="row" style="margin-top:10px;">
                  <button class="btn" onclick="addToCart(${b.id})">Th√™m v√†o gi·ªè</button>
                  <a class="btn secondary" href="#/detail/${b.id}">Xem chi ti·∫øt</a>
                </div>
              </div>
            `).join('')}
          </div>
        `;
    }

    // Boot
    window.addEventListener('hashchange', router);
    updateCartCount();
    router();
  </script>
z
  <script src="js/cart.js"></script>
  <script src="js/app.js"></script>
  <script>
    const menuToggle = document.getElementById('menuToggle');
    const navMenu = document.getElementById('navMenu');

    menuToggle.addEventListener('click', () => {
      navMenu.classList.toggle('show');
    });
  </script>

</body>

</html>