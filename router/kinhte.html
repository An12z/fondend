<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hi·ªáu S√°ch Mini - Kinh T·∫ø</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <header>
   <div class="brand">üìö Hi·ªáu S√°ch Mini</div>
    <nav>
         <!-- Thanh t√¨m ki·∫øm ƒë·∫∑t ƒë·∫ßu ti√™n -->
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="T√¨m s√°ch..." />
      <button onclick="searchBooks()">üîç</button>
    </div>
      <a href="child.html" id="nav-home">Trang ch·ªß</a>
      <a href="cart.html" id="nav-cart">Gi·ªè h√†ng (<span id="cart-count">0</span>)</a>
      <a href="about.html" class="nav-link">Gi·ªõi thi·ªáu</a>
      <!-- Th·ªÉ lo·∫°i c√≥ menu con -->
      <div class="dropdown">
        <a href="#/category" id="nav-category">Th·ªÉ lo·∫°i ‚ñæ</a>
        <div class="dropdown-content">
          <a href="congnghe.html">üìò C√¥ng ngh·ªá</a>
          <a href="vanhoc.html">üìñ VƒÉn h·ªçc</a>
          <a href="kinhte.html">üíº Kinh t·∫ø</a>
          <a href="thieunhi.html">üë∂ Thi·∫øu nhi</a>
        </div>
      </div>

    </nav>
  </header>

  <main class="container">
    <div id="view"></div>
  </main>

  <footer class="footer bg-gray-200 text-gray-800 text-center py-6 mt-8">
    <p class="font-semibold">¬© 2025 Hi·ªáu S√°ch Mini ‚Äî Demo t·ªëi gi·∫£n b√°n & ƒë·ªçc ebook</p>

    <div class="mt-2">
      <p>
        <strong>ƒê∆°n v·ªã:</strong>
        <a href="https://www.google.com/maps/place/Cao+%C4%90%E1%BA%B3ng+C%C3%B4ng+Ngh%E1%BB%87+Th%C3%B4ng+Tin+TP.HCM/@10.7750549,106.6319191,857m/data=!3m2!1e3!4b1!4m6!3m5!1s0x31752ea144839ef1:0x798819bdcd0522b0!8m2!3d10.7750496!4d106.6344994!16s%2Fg%2F1v6wltsg?entry=ttu&g_ep=EgoyMDI1MDkwMi4wIKXMDSoASAFQAw%3D%3D"
          target="_blank" class="underline hover:text-blue-600">
          Tr∆∞·ªùng Cao ƒë·∫≥ng C√¥ng ngh·ªá Th√¥ng tin (ITC)
        </a>
      </p>
      <p><strong>Ng∆∞·ªùi th·ª±c hi·ªán:</strong> Nguy·ªÖn L√™ Th√°i An</p>
    </div>

    <div class="mt-2">
      <p><strong>Li√™n h·ªá:</strong></p>
      <p>üìû 0984 499 074</p>
      <p>‚úâÔ∏è <a href="mailto:annguyengocong2@gmail.com"
          class="underline hover:text-blue-600">annguyengocong2@gmail.com</a></p>
    </div>
  </footer>


  <script>
    /**
     * D·ªÆ LI·ªÜU M·∫™U ‚Äî  c√≥ th·ªÉ thay th·∫ø b·∫±ng API/backend sau n√†y
     * ƒê·∫∑t file PDF th·∫≠t v√†o th∆∞ m·ª•c /ebooks/ t∆∞∆°ng ·ª©ng (vd: ebooks/book1.pdf)
     */
    const BOOKS = [
  { id: 1, title: 'Kinh T·∫ø H·ªçc Vƒ© M√¥', author: 'P. Samuelson', price: 120000, type: 'ebook', cover: 'anh/11.png', pdf: 'ebooks/econ1.pdf', description: 'Nguy√™n l√Ω c∆° b·∫£n v·ªÅ tƒÉng tr∆∞·ªüng, l·∫°m ph√°t v√† th·∫•t nghi·ªáp.' },
  { id: 2, title: 'T∆∞ B·∫£n Lu·∫≠n', author: 'Karl Marx', price: 150000, type: 'ebook', cover: 'anh/12.png', pdf: 'ebooks/econ2.pdf', description: 'Ph√¢n t√≠ch v·ªÅ s·∫£n xu·∫•t h√†ng h√≥a, gi√° tr·ªã th·∫∑ng d∆∞ v√† kinh t·∫ø ch√≠nh tr·ªã.' },
  { id: 3, title: 'Qu·ªëc Gia Kh·ªüi Nghi·ªáp', author: 'Dan Senor & Saul Singer', price: 135000, type: 'ebook', cover: 'anh/13.png', pdf: 'ebooks/econ3.pdf', description: 'Kh√°m ph√° m√¥ h√¨nh kinh t·∫ø v√† tinh th·∫ßn kh·ªüi nghi·ªáp c·ªßa Israel.' },
  { id: 4, title: 'Kinh T·∫ø H·ªçc Vi M√¥', author: 'Hal R. Varian', price: 110000, type: 'ebook', cover: 'anh/14.png', pdf: 'ebooks/econ4.pdf', description: 'Cung, c·∫ßu, th·ªã tr∆∞·ªùng v√† h√†nh vi ng∆∞·ªùi ti√™u d√πng.' },
  { id: 5, title: 'T∆∞ Duy Nhanh V√† Ch·∫≠m', author: 'Daniel Kahneman', price: 140000, type: 'ebook', cover: 'anh/15.png', pdf: 'ebooks/econ5.pdf', description: 'Kinh t·∫ø h·ªçc h√†nh vi v√† c√°ch con ng∆∞·ªùi ra quy·∫øt ƒë·ªãnh.' },
  { id: 6, title: 'Cha Gi√†u Cha Ngh√®o', author: 'Robert T. Kiyosaki', price: 95000, type: 'ebook', cover: 'anh/16.png', pdf: 'ebooks/econ6.pdf', description: 'B√†i h·ªçc t√†i ch√≠nh c√° nh√¢n v√† t∆∞ duy v·ªÅ ti·ªÅn b·∫°c.' },
  { id: 7, title: 'Nguy√™n L√Ω Kinh T·∫ø H·ªçc', author: 'N. Gregory Mankiw', price: 160000, type: 'ebook', cover: 'anh/17.png', pdf: 'ebooks/econ7.pdf', description: 'Gi·ªõi thi·ªáu to√†n di·ªán v·ªÅ c√°c nguy√™n l√Ω kinh t·∫ø h·ªçc hi·ªán ƒë·∫°i.' },
  { id: 8, title: 'S·ª± Gi√†u C√≥ C·ªßa C√°c Qu·ªëc Gia', author: 'Adam Smith', price: 145000, type: 'ebook', cover: 'anh/18.png', pdf: 'ebooks/econ8.pdf', description: 'T√°c ph·∫©m kinh ƒëi·ªÉn khai sinh kinh t·∫ø h·ªçc hi·ªán ƒë·∫°i.' },
  { id: 9, title: 'Kinh T·∫ø H·ªçc H√†nh Vi', author: 'Richard H. Thaler', price: 125000, type: 'ebook', cover: 'anh/19.png', pdf: 'ebooks/econ9.pdf', description: 'Ph√¢n t√≠ch t√¢m l√Ω trong h√†nh vi kinh t·∫ø v√† th·ªã tr∆∞·ªùng.' },
  { id: 10, title: '21 B√†i H·ªçc Cho Th·∫ø K·ª∑ 21', author: 'Yuval Noah Harari', price: 135000, type: 'ebook', cover: 'anh/20.png', pdf: 'ebooks/econ10.pdf', description: 'Nh·ªØng v·∫•n ƒë·ªÅ kinh t·∫ø, ch√≠nh tr·ªã v√† x√£ h·ªôi trong th·ªùi ƒë·∫°i m·ªõi.' }
];

    // Helpers
    const $ = (sel, el = document) => el.querySelector(sel);
    const $$ = (sel, el = document) => [...el.querySelectorAll(sel)];
    const money = v => v.toLocaleString('vi-VN') + '‚Ç´';

    // LocalStorage state
    const load = (k, def) => { try { return JSON.parse(localStorage.getItem(k)) ?? def; } catch { return def; } };
    const save = (k, v) => localStorage.setItem(k, JSON.stringify(v));

    const state = {
      cart: load('cart', []), // [{id, qty}]
      purchases: load('purchases', []) // [bookId]
    };

    function sync() {
      save('cart', state.cart);
      save('purchases', state.purchases);
      updateCartCount();
    }

    function updateCartCount() {
      const count = state.cart.reduce((s, i) => s + i.qty, 0);
      $('#cart-count').textContent = count;
    }




    // Views
    function renderHome() {
      const view = $('#view');
      view.innerHTML = `<div class="row" style="justify-content:space-between; align-items: end; margin-bottom: 14px;">
          <div>
            <h2 style="margin:6px 0 4px">M·ªõi c·∫≠p nh·∫≠t</h2>
            <div class="muted">Danh s√°ch ebook c√≥ th·ªÉ ƒë·ªçc online sau khi mua</div>
          </div>
        </div>
        <div class="grid">${BOOKS.map(b => `
          <div class="card">
            <img src="${b.cover}" alt="${b.title}" />
            <div class="title">${b.title}</div>
            <div class="muted">${b.author}</div>
            <div class="row" style="justify-content:space-between; margin-top:6px;">
              <div class="price">${money(b.price)}</div>
              <span class="tag">${b.type.toUpperCase()}</span>
            </div>
            <div class="row" style="margin-top:10px;">
              <button class="btn" onclick="addToCart(${b.id})">Th√™m v√†o gi·ªè</button>
              <a class="btn secondary" href="#/detail/${b.id}">Xem chi ti·∫øt</a>
            </div>
          </div>
        `).join('')}</div>`;
      setActive('#/home');
    }

    function renderDetail(id) {
      const view = $('#view');
      const b = BOOKS.find(x => x.id == id);
      if (!b) { view.innerHTML = `<div class="empty panel">Kh√¥ng t√¨m th·∫•y s√°ch.</div>`; return; }

      const owned = state.purchases.includes(b.id);
      view.innerHTML = `
        <div class="panel detail">
          <div><img src="${b.cover}" alt="${b.title}" style="width:100%; border-radius:16px;"></div>
          <div>
            <h2 style="margin:0 0 6px">${b.title}</h2>
            <div class="muted" style="margin-bottom:10px;">T√°c gi·∫£: ${b.author}</div>
            <p class="muted" style="line-height:1.6">${b.description}</p>

            <div class="row" style="margin:14px 0 8px; align-items: center;">
              <div class="price" style="font-size:18px;">${money(b.price)}</div>
              <span class="tag">${b.type.toUpperCase()}</span>
            </div>

            <div class="row" style="margin-top:10px;">
              <button class="btn" onclick="addToCart(${b.id})">Th√™m v√†o gi·ªè</button>
              ${owned ? `<a class="btn secondary" href="#/reader/${b.id}">ƒê·ªçc ngay</a>` : `<button class="btn secondary" onclick="alert('Mua s√°ch ƒë·ªÉ ƒë·ªçc online nh√©!');">ƒê·ªçc th·ª≠ (kh√≥a)</button>`}
              <a class="btn secondary" href="#/home">‚Üê Quay l·∫°i</a>
            </div>
          </div>
        </div>
      `;
      setActive();
    }

    function renderCart() {
      const view = $('#view');
      if (state.cart.length === 0) {
        view.innerHTML = `<div class="panel empty">Gi·ªè h√†ng tr·ªëng. <a href="#/home">Ti·∫øp t·ª•c mua s·∫Øm</a></div>`;
        setActive('#/cart');
        return;
      }
      const rows = state.cart.map(i => {
        const b = BOOKS.find(x => x.id === i.id);
        return `<div class="row" style="justify-content:space-between; padding:10px 0; border-bottom:1px dashed rgba(148,163,184,0.2)">
          <div class="row" style="gap:10px;">
            <img src="${b.cover}" alt="${b.title}" style="width:44px; height:60px; border-radius:6px; object-fit:cover;">
            <div>
              <div style="font-weight:700">${b.title}</div>
              <div class="muted">SL: ${i.qty}</div>
            </div>
          </div>
          <div class="row" style="gap:10px;">
            <div class="price">${money(b.price * i.qty)}</div>
            <button class="btn danger" onclick="removeFromCart(${b.id})">X√≥a</button>
          </div>
        </div>`
      }).join('');
      const total = state.cart.reduce((s, i) => {
        const b = BOOKS.find(x => x.id === i.id); return s + b.price * i.qty;
      }, 0);

      view.innerHTML = `<div class="panel">
        <h2>Gi·ªè h√†ng</h2>
        ${rows}
        <div class="row" style="justify-content:space-between; margin-top:14px;">
          <div class="muted">T·ªïng c·ªông</div>
          <div class="price" style="font-size:18px;">${money(total)}</div>
        </div>
        <div class="row" style="margin-top:12px;">
          <button class="btn" onclick="checkout()">Thanh to√°n (mock)</button>
          <a class="btn secondary" href="#/home">‚Üê Ti·∫øp t·ª•c mua</a>
        </div>
      </div>`;
      setActive('#/cart');
    }

    function renderReader(id) {
      const view = $('#view');
      const b = BOOKS.find(x => x.id == id);
      if (!b) { view.innerHTML = `<div class="panel empty">Kh√¥ng t√¨m th·∫•y s√°ch.</div>`; return; }
      const owned = state.purchases.includes(b.id);
      if (!owned) {
        view.innerHTML = `<div class="panel empty">B·∫°n ch∆∞a s·ªü h·ªØu ebook n√†y. <a href="#/detail/${b.id}">Mua ngay</a></div>`;
        return;
      }
      view.innerHTML = `
        <div class="panel">
          <div class="row" style="justify-content:space-between; align-items:center; margin-bottom:10px;">
            <div>
              <div class="muted" style="font-size:12px;">ƒêang ƒë·ªçc</div>
              <h2 style="margin:2px 0 0">${b.title}</h2>
            </div>
            <a class="btn secondary" href="#/detail/${b.id}">‚Üê Quay l·∫°i chi ti·∫øt</a>
          </div>
          <embed class="reader" src="${b.pdf}" type="application/pdf" />
          <div class="muted" style="margin-top:8px; font-size:12px;">N·∫øu PDF kh√¥ng hi·ªÉn th·ªã, h√£y ƒë·∫£m b·∫£o b·∫°n ƒë√£ ƒë·∫∑t file t·∫°i <code>${b.pdf}</code>.</div>
        </div>z
      `;
      setActive();
    }


    // Tiny router
    function router() {
      const hash = location.hash || '#/home';
      const [_, route, param] = hash.split('/');
      switch (route) {
        case 'home': renderHome(); break;
        case 'detail': renderDetail(param); break;
        case 'cart': renderCart(); break;
        case 'reader': renderReader(param); break;
        default: renderHome();
      }
    }

    function setActive(target) {
      $$('#nav-home, #nav-cart').forEach(a => a.classList.remove('active'));
      if (target) $(target === '#/cart' ? '#nav-cart' : '#nav-home').classList.add('active');
    }

    window.addEventListener('hashchange', router);
    updateCartCount();
    router();

  </script>
  <!-- Import JS t√°ch ri√™ng -->
  <script src="js/books.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/app.js"></script>

</body>

</html>